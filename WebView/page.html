<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
<title>The Ultimate Guide to WKWebView – Hacking with Swift</title>
<meta name="description" content="Get WebKit into your app the easy way">
<meta name="keywords" content="hacking with swift, apple, developer, news, tutorials, swift, ios, macos, watchos, tvos, api, swift 5, swift 4, swift, swiftui, swift ui, tutorial, ios, ios 13, ios 12, wwdc, apple, ipad, iphone, free, tutorial, guide, objective c, watchos, tvos, macOS, uikit, watchkit">
<meta name="author" content="Paul Hudson @twostraws">
<link href="/css/site-14.css" rel="stylesheet">
<link rel="alternate" type="application/rss+xml" title="Hacking with Swift RSS feed" href="https://www.hackingwithswift.com/articles/rss" />
<link rel="search" type="application/opensearchdescription+xml" title="Search Hacking with Swift" href="https://www.hackingwithswift.com/search.xml" />
<link rel="canonical" href="https://www.hackingwithswift.com/articles/112/the-ultimate-guide-to-wkwebview" />
<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<meta property="og:image" content="https://www.hackingwithswift.com/uploads/iphone-6.jpg" />
<meta property="og:title" content="The Ultimate Guide to WKWebView" />
<meta property="og:description" content="Get WebKit into your app the easy way" />
<meta property="og:url" content="https://www.hackingwithswift.com/articles/112/the-ultimate-guide-to-wkwebview" />
<meta property="og:site_name" content="Hacking with Swift" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@twostraws" />
<meta name="twitter:title" content="The Ultimate Guide to WKWebView" />
<meta name="twitter:description" content="Get WebKit into your app the easy way" />
<meta name="twitter:creator" content="@twostraws" />
<meta name="twitter:image" content="https://www.hackingwithswift.com/uploads/iphone-6.jpg" />
<meta name="twitter:domain" content="hackingwithswift.com" />
<meta name="twitter:dnt" content="on">
</head>
<body class="sections-page sidebar-collapse">
<nav class="navbar navbar-expand-lg bg-hws fixed-top ">
<div class="container">
<div class="navbar-translate">
<a class="navbar-brand" href="/">
<img src="/img/logo-curves.svg" style="width: 200px; height: auto;" alt="Hacking with Swift" />
</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-bar top-bar"></span>
<span class="navbar-toggler-bar middle-bar"></span>
<span class="navbar-toggler-bar bottom-bar"></span>
</button>
 </div>
<div class="collapse navbar-collapse">
<ul class="navbar-nav ml-auto" id="ceva">
<li class="nav-item dropdown">
<a href="/forums" class="nav-link">
<p>Forums</p>
</a>
</li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown">
<p>Learn</p>
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
<a class="dropdown-item" href="/learn">
<i class="fal fa-star fa-lg"></i> Start Here
</a>
<a class="dropdown-item" href="/articles">
<i class="fal fa-newspaper fa-lg"></i> Latest Articles
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/100">
<i class="fal fa-toolbox fa-lg"></i> 100 Days of Swift
</a>
<a class="dropdown-item" href="/100/swiftui">
<i class="fal fa-rocket fa-lg"></i> 100 Days of SwiftUI
</a>
<a class="dropdown-item" href="/example-code">
<i class="fal fa-toolbox fa-lg"></i> Swift Knowledge Base
</a>
<a class="dropdown-item" href="/quick-start/swiftui">
<i class="fal fa-desktop-alt fa-lg"></i> SwiftUI by Example
</a>
<a class="dropdown-item" href="/sixty">
<i class="fal fa-clock fa-lg"></i> Swift in Sixty Seconds
</a>
<a class="dropdown-item" href="/read">
<i class="fal fa-book fa-lg"></i> Hacking with Swift
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/videos">
<i class="fal fa-play-circle fa-lg"></i> YouTube videos
</a>
<a class="dropdown-item" href="/playgrounds">
<i class="fal fa-map-marked-alt fa-lg"></i> Swift Playgrounds
</a>
<a class="dropdown-item" href="/unwrap">
<i class="fal fa-fw fa-mobile-android fa-lg"></i> Get the iOS App
</a>
</div>
</li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown">
<p>Careers</p>
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
<a class="dropdown-item" href="/career-guide">
<i class="fal fa-lightbulb-on fa-lg"></i> Start Here
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/interview-questions">
<i class="fal fa-comment-alt-check fa-lg"></i> Interview Questions
</a>
<a class="dropdown-item" href="/review">
<i class="fal fa-list-ul fa-lg"></i> Interactive Review
</a>
<a class="dropdown-item" href="/test">
<i class="fal fa-graduation-cap fa-lg"></i> Test your Swift
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/forums/jobs">
<i class="fal fa-building fa-lg fa-fw"></i> Find a Job
</a>
</div>
</li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown">
<p>Store</p>
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
<a class="dropdown-item" href="/plus">
<i class="fal fa-star fa-lg"></i> Subscribe to Hacking with Swift+
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/store">
<i class="fal fa-books fa-lg"></i> Browse Swift Courses
</a>
<a class="dropdown-item" href="/store/bundles">
<i class="fal fa-shopping-cart fa-lg"></i> Book bundles
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/faq">
<i class="fal fa-question-circle fa-lg"></i> Frequently Asked Questions
</a>
<a class="dropdown-item" href="/update-policy">
<i class="fal fa-sparkles fa-lg"></i> Lifetime Update Policy
</a>
<a class="dropdown-item" href="/frequent-flyer">
 <i class="fal fa-plane fa-lg"></i> Frequent Flyer Club
</a>
<a class="dropdown-item" href="/apple-books">
<i class="fal fa-book-open fa-lg"></i> Buy on Apple Books
</a>
<a class="dropdown-item" href="/reviews">
<i class="fal fa-star fa-lg"></i> Reader Reviews
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/refund-policy">
<i class="fal fa-comment-dollar fa-lg"></i> Refund Policy
</a>
</div>
</li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" id="navbarDropdownMenuLink1" data-toggle="dropdown">
<p>About</p>
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink1">
<a class="dropdown-item" href="/about">
<i class="fal fa-users fa-lg"></i> About Hacking with Swift
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/awards">
<i class="fal fa-trophy fa-lg"></i> Swift Community Awards
</a>
<a class="dropdown-item" href="/live">
<i class="fal fa-ticket-alt fa-lg"></i> Hacking with Swift Live
</a>
<a class="dropdown-item" href="/speaking">
<i class="fal fa-keynote fa-lg"></i> Conference Talks
</a>
<a class="dropdown-item" href="/affiliates">
<i class="fal fa-envelope-open-dollar fa-lg"></i> Affiliate Program
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/newsletter">
<i class="fal fa-newspaper fa-lg"></i> Newsletter
</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="/sponsor">
<i class="fal fa-megaphone fa-lg"></i> Sponsor the site
</a>
</div>
</li>
<li class="nav-item dropdown">
<a href="/plus" class="nav-link btn btn-sm" style="margin: 4px 8px; background-color: rgba(255, 255, 255, 0.9); color: black;">
<p style="font-size: inherit;">SUBSCRIBE</p>
</a>
</li>
<li class="nav-item">
<form class="form-inline ml-auto" autocomplete="off" data-background-color method="get" action="/search" onSubmit="return global_search_navigate();">
<div class="input-group" style="margin-bottom: 0;">
<div class="input-group-prepend">
<span class="input-group-text"><i class="fal fa-search"></i></span>
</div>
<input name="criteria" id="global_search" type="search" class="form-control" placeholder="Search" aria-label="Search" />
</div>
</form>
</li>
</ul>
</div>
</div>
</nav>
<div class="wrapper">
<div class="section-space"></div>
<skybar id="latestTutorial">
<div style="background-color: #222222; margin: 0;">
<p style="padding: 3px; padding-top: 7px; margin: 0; color: white; text-align: center;"><a href="/plus" style="color: white;" rel="noopener"><span class="pure-evil">NEW:</span> <strong>Subscribe to Hacking with Swift+ and accelerate your learning!</strong> &gt;&gt;</a></p>
</div>
</skybar>
<div class="cd-section" id="blogs">
<div class="blogs-4" id="blogs-4">
<div class="container">
<div class="row">
<div class="col-lg-9 mx-auto">
<div class="row">
<div class="col-md-12">
<h1 class="title" style="margin: 0; word-break: break-word;">The Ultimate Guide to WKWebView</h1>
<p class="lead description">Get WebKit into your app the easy way</p>
</div>
</div>
<div class="row">
<div class="col-md-12">
<p style="margin: 0;"><a href="/about">Paul Hudson</a> &nbsp;&nbsp; <time itemprop="dateModified" datetime="2019-03-29T13:11:09+00:00">March 29th 2019</time>
<meta itemprop="datePublished" content="2018-05-24T22:22:05+00:00"> &nbsp;&nbsp; <i class="fab fa-twitter" aria-hidden="true" style="color: #4099ff"></i> <a href="https://twitter.com/twostraws" target="_blank">@twostraws</a></p>
</div>
</div>
<div class="row" style="margin-top: 20px;">
<div class="col-md-12">
<img src="/uploads/iphone-6.jpg" class="img-responsive" style="width: 100%; max-height: 400px; object-fit: cover; border: 1px solid #888888;" />
</div>
</div>
<div class="row" style="margin-top: 20px;">
<div class="col-md-12">
<p><code>WKWebView</code> is a powerhouse on iOS, providing high-performance web rendering wherever and whenever you need.</p>
<p>In this article I’ve put together 15 of the most common use cases for <code>WKWebView</code>, and provided hands-on code solutions for each of them. So, if you want to solve a specific problem, or if you just want to see what WebKit is capable of, read on!</p>
<div class="hws-sponsor" style="position: relative;">
<a rel="nofollow noopener" target="_blank" href="https://try.instabug.com/hackingwithswift?utm_source=hackingwithswift&utm_medium=nativeads&utm_campaign=hackingwithswift-nativeads-july" style="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 100;"></a>
<picture>
<source srcset="/img/sponsors/instabug-dark.svg" media="(prefers-color-scheme: dark)" />
<img alt="Hacking with Swift is sponsored by Instabug" src="/img/sponsors/instabug-light.svg" />
</picture>
<p><strong class="badge badge-danger">SPONSORED</strong> <strong>Are you tired of wasting time debugging your Swift app?</strong> Instabug’s SDK is here to help you minimize debugging time by providing you with complete device details, network logs, and reproduction steps with every bug report. All data is attached automatically, and it only takes a line of code to setup. Start your free trial now and get 3 months off exclusively for the Hacking with Swift Community.</p>
<p class="text-right"><a rel="nofollow noopener" target="_blank" href="https://try.instabug.com/hackingwithswift?utm_source=hackingwithswift&utm_medium=nativeads&utm_campaign=hackingwithswift-nativeads-july" class="btn btn-danger" style="border-radius: 10px; text-decoration: none; margin-bottom: 0; font-weight: bold;">Start your free trial!</a></p>
</a>
</div>
<p class="text-center" style="margin-top: -20px; margin-bottom: 40px; font-style: italic;"><a href="/sponsor">Sponsor Hacking with Swift and reach the world's largest Swift community!</a></p>
<h3 class="title">1. Making a web view fill the screen</h3>
<p>Sometimes you’ll see folks add code to <code>viewDidLoad()</code> to create a web view then make it fill all available space. This is inefficient, and also far harder than it needs to be.</p>
<p>A simpler approach is to add a property to your view controller like this:</p>
<pre><code class="language-swift">let webView = WKWebView()</code></pre>
<p>Then overriding the <code>loadView()</code> method to assign that to your view controller’s view, like this:</p>
<pre><code class="language-swift">override func loadView() {
    self.view = webView
}</code></pre>
<p>Having a dedicated <code>webView</code> property is helpful so that you can reference its properties and methods more easily later on.</p>
<h3 class="title">2. Loading remote content</h3>
<p>Given that one of the major uses for <code>WKWebView</code> is to load remote content, it’s weirdly not just one line of code. Instead, you create a <code>URL</code> from a string, wrap that in a <code>URLRequest</code>, then ask the web view to load <em>that</em>:</p>
<pre><code class="language-swift">if let url = URL(string: "https://www.apple.com") {
    let request = URLRequest(url: url)
    webView.load(request)
}</code></pre>
<p>If you intend to load URLs frequently, you might find it easier to wrap that behavior inside an extension:</p>
<pre><code class="language-swift">extension WKWebView {
    func load(_ urlString: String) {
        if let url = URL(string: urlString) {
            let request = URLRequest(url: url)
            load(request)
        }
    }
}</code></pre>
<p>Now you can load a website just by running <code>webView.load("https://www.apple.com")</code>.</p>
<h3 class="title">3. Loading local content</h3>
<p><code>WKWebView</code> can load any HTML stored in your app bundle using its <code>loadFileURL()</code> method. You should provide this with a <code>URL</code> to some HTML file that you know is in your bundle, along with another <code>URL</code> that stores any other files you want to allow the web view to read.</p>
<p>For example, if you wanted to load a file called &quot;help.html&quot; you might use code like this:</p>
<pre><code class="language-swift">if let url = Bundle.main.url(forResource: "help", withExtension: "html") {
    webView.loadFileURL(url, allowingReadAccessTo: url.deletingLastPathComponent())
}</code></pre>
<p>That <code>url.deletingLastPathComponent()</code> part tells WebKit it can read from the directory that contains help.html – that’s a good place to put any assets such as images, JavaScript, or CSS.</p>
<h3 class="title">4. Loading HTML fragments</h3>
<p>You can generate HTML in code and feed that directly to <code>WKWebView</code>. For example, this displays a heading message:</p>
<pre><code class="language-swift">let html = """
&lt;html&gt;
&lt;body&gt;
&lt;h1&gt;Hello, Swift!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
"""

webView.loadHTMLString(html, baseURL: nil)</code></pre>
<p>Note the <code>baseURL</code> parameter to <code>loadHTMLString()</code>. If you are referencing assets in your bundle such as images or CSS, you should specify <code>Bundle.main.resourceURL</code> there so they can be loaded. For example:</p>
<pre><code class="language-swift">webView.loadHTMLString(html, baseURL: Bundle.main.resourceURL)</code></pre>
<h3 class="title">5. Controlling which sites can be visited</h3>
<p>By default <code>WKWebView</code> allows access to all available websites, but it’s easy to lock down the list to any criteria of your choosing.</p>
<p>First, make something conform to <code>WKNavigationDelegate</code> – it could be your view controller, but it doesn’t have to be. For example:</p>
<pre><code class="language-swift">class ViewController: UIViewController, WKNavigationDelegate {</code></pre>
<p>Second, make that object the navigation delegate of your web view. If you were using your view controller, you’d write this:</p>
<pre><code class="language-swift">webView.navigationDelegate = self</code></pre>
<p>Finally, implement the <code>decidePolicyFor</code> method, adding any logic you want to decide whether the page should be loaded. As an example, this implementation allows the user to visit the Apple homepage and nothing else:</p>
<pre><code class="language-swift">func webView(_ webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping (WKNavigationActionPolicy) -&gt; Void) {
    if let host = navigationAction.request.url?.host {
        if host == "www.apple.com" {
            decisionHandler(.allow)
            return
        }
    }

    decisionHandler(.cancel)
}</code></pre>
<h3 class="title">6. Opening a link in the external browser</h3>
<p>It’s common to want to handle some links inside your app and others externally, and this doesn’t take much work thanks to the <code>WKNavigationDelegate</code> protocol.</p>
<p>First, make an object conform to the protocol – it might be your view controller, but it doesn’t need to be. For example:</p>
<pre><code class="language-swift">class ViewController: UIViewController, WKNavigationDelegate {</code></pre>
<p>Second, set that object as your web view’s navigation delegate. If you were using your view controller you would write this:</p>
<pre><code class="language-swift">webView.navigationDelegate = self</code></pre>
<p>Finally, implement the <code>decidePolicyFor</code> method with whatever logic should decide whether the page is loaded internally or externally. For internal loads make sure you call the <code>decisionHandler()</code> closure with <code>.cancel</code> so the load halts, while also calling <code>UIApplication.shared.open()</code> to have the URL open in the external browser.</p>
<p>As an example, this implementation will load all links inside the web view as long as they don’t go to the Apple homepage:</p>
<pre><code class="language-swift">func webView(_ webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping (WKNavigationActionPolicy) -&gt; Void) {
    if let url = navigationAction.request.url {
        if url.host == "www.apple.com" {
            UIApplication.shared.open(url)
            decisionHandler(.cancel)
            return
        }
    }

    decisionHandler(.allow)
}</code></pre>
<h3 class="title">7. Monitoring page loads</h3>
<p>Loading one web page means fetching some HTML, downloading any JavaScript and CSS it uses, downloading any images, and so on.</p>
<p>To help keep your users informed, it’s a good idea to monitor page loads and show some sort of user interface updates so they know something is happening. This can be done by observing the <code>estimatedProgress</code> property, like this:</p>
<pre><code class="language-swift">webView.addObserver(self, forKeyPath: #keyPath(WKWebView.estimatedProgress), options: .new, context: nil)</code></pre>
<p>You should now implement the <code>observeValue(forKeyPath:)</code> method, which will pass you a string saying what changed. If that’s set to “estimatedProgress” then we can do something interesting with the web view’s latest <code>estimatedProgress</code> property:</p>
<pre><code class="language-swift">override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if keyPath == "estimatedProgress" {
        print(Float(webView.estimatedProgress))
    }
}</code></pre>
<h3 class="title">8. Reading a web page’s title as it changes</h3>
<p>You can use <code>webView.title</code> to read the current page title, but because page titles change as the user browses around you’re likely to want to be notified whenever it changes. </p>
<p>To do that, first register to receive notifications when the title changes:</p>
<pre><code class="language-swift">webView.addObserver(self, forKeyPath: #keyPath(WKWebView.title), options: .new, context: nil)</code></pre>
<p>Now implement the <code>observeValue(forKeyPath:)</code> method. This will pass you a string saying what changed, and if that’s “title” then you can do something with it.</p>
<p>To get you started, this code just prints the title whenever it changes:</p>
<pre><code class="language-swift">override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if keyPath == "title" {
        if let title = webView.title {
            print(title)
        }
    }
}</code></pre>
<h3 class="title">9. Reading pages the user has visited</h3>
<p>If you’re serious about building a useful browser experience, you’ll probably want to read the list of sites the user has visited. This is all available inside the <code>backForwardList</code> property of web views, which itself contains the array <code>backList</code> and <code>forwardList</code>.</p>
<p>Inside each of those arrays you can read the URL for each page that was visited, along with the title that was used. For example, you can print out a list of all sites the user has already visited using this loop:</p>
<pre><code class="language-swift">for page in webView.backForwardList.backList {
    print("User visited \(page.url.absoluteString)")
}</code></pre>
<h3 class="title">10. Injecting JavaScript into a page</h3>
<p>Once your web view has loaded some content, you can execute any JavaScript you like inside that rendered page by using the <code>evaluateJavaScript()</code> method. All you need to do is give it some JavaScript to execute – reading some value, for example – along with a closure to run when execution has finished.</p>
<p>As an example, if you had a page that contained <code>&lt;div id="username"&gt;@twostraws&lt;/div&gt;</code> and you wanted to read the “@twostraws” part, you would use this:</p>
<pre><code class="language-swift">webView.evaluateJavaScript("document.getElementById('username').innerText") { (result, error) in
    if let result = result {
        print(result)
    }
}</code></pre>
<h3 class="title">11. Reading and deleting cookies</h3>
<p>You can read through the complete list of cookies associated with a website by using the <code>httpCookieStore</code> property of your web view. This is buried under the <code>configuration.websiteDataStore</code> property, but once you find it you can call <code>getAllCookies()</code> to get an array of cookies, or call <code>delete()</code> to delete a specific cookie.</p>
<p>As an example, this code loops over all cookies, and when it finds one called “authentication” deletes it – all other cookies are just printed out:</p>
<pre><code class="language-swift">webView.configuration.websiteDataStore.httpCookieStore.getAllCookies { cookies in
    for cookie in cookies {
        if cookie.name == "authentication" {
            self.webView.configuration.websiteDataStore.httpCookieStore.delete(cookie)
        } else {
            print("\(cookie.name) is set to \(cookie.value)")
        }
    }
}</code></pre>
<h3 class="title">12. Providing a custom user agent</h3>
<p>User agents let your web servers identify the type of web browser that is accessing a page, and are commonly used to enable or limit which features are available.</p>
<p>If you’re reading pages from your own server, you can adjust the user agent to your own string so that you can identify users of your app. For example:</p>
<pre><code class="language-swift">webView.customUserAgent = "My Awesome App"</code></pre>
<p><strong>Note:</strong> There's nothing stopping you from changing the user agent when accessing other resources, but keep in mind that some sites might read the user agent string and get confused if it doesn't match what they expect.</p>
<h3 class="title">13. Showing custom UI</h3>
<p><code>WKWebView</code> is a bit like having one lone tab in the iOS Safari app, which means the user can’t open and close new windows to browse multiple pages, and it won’t even show alerts or confirmation requests triggered by JavaScript.</p>
<p>Fortunately, you can change that using the <code>WKUIDelegate</code> protocol: set an object to be the UI delegate of your web view and you can show custom alerts, manage your own tabs, and more.</p>
<p>First, make some object such as your view controller conform to it:</p>
<pre><code class="language-swift">class ViewController: UIViewController, WKUIDelegate {</code></pre>
<p>Second, assign your view controller to the <code>uiDelegate</code> property of your web view:</p>
<pre><code class="language-swift">webView.uiDelegate = self</code></pre>
<p>Finally, implement as many of the optional methods of <code>WKUIDelegate</code> as you want. For example, you can make <code>WKWebView</code> show a custom alert controller when any web page uses the <code>alert()</code> JavaScript function:</p>
<pre><code class="language-swift">func webView(_ webView: WKWebView, runJavaScriptAlertPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping () -&gt; Void) {
    let ac = UIAlertController(title: "Hey, listen!", message: message, preferredStyle: .alert)
    ac.addAction(UIAlertAction(title: "OK", style: .default, handler: nil))
    present(ac, animated: true)
    completionHandler()
}</code></pre>
<p>There’s also <code>runJavaScriptConfirmPanelWithMessage</code> for showing confirm and deny UI, <code>runJavaScriptTextInputPanelWithPrompt</code> for requesting user text input, and so on.</p>
<p><strong>Note:</strong> You <em>must</em> call the completion handler when you’re finished. JavaScript’s alerts are blocking, which means JavaScript execution will not continue until the alert finishes. As a result, WebKit will complain if you don’t let it know when you’re done.</p>
<h3 class="title">14. Snapshot part of the page</h3>
<p>Although you can use the regular <code>drawHierarchy()</code> method for converting a view to an image, WebKit comes with its own <code>takeSnapshot()</code> method that lets you crop and size the image as needed.</p>
<p>For example, this will produce a 150x50 image from the top-left of the web view:</p>
<pre><code class="language-swift">let config = WKSnapshotConfiguration()
config.rect = CGRect(x: 0, y: 0, width: 150, height: 50)

webView.takeSnapshot(with: config) { image, error in
    if let image = image {
        print(image.size)
    }
}</code></pre>
<p>If you don’t want a cropped image - i.e. you want the whole thing – just use <code>nil</code> instead of <code>config</code>.</p>
<h3 class="title">15. Detecting data</h3>
<p>Web views have built-in data detector support, which means they can make things like phone numbers, calendar events, and flight numbers into tappable links.</p>
<p>These are all disabled so the default behavior is to render web pages as they were designed, but it’s trivial to override – just create your web view using a custom <code>WKWebViewConfiguration</code> object.</p>
<p>For example, this instructs the web view to detect all possible types of data:</p>
<pre><code class="language-swift">let config = WKWebViewConfiguration()
config.dataDetectorTypes = [.all]
let webView = WKWebView(frame: .zero, configuration: config)</code></pre>
<div class="hws-sponsor" style="position: relative;">
<a href="https://try.instabug.com/hackingwithswift?utm_source=hackingwithswift&utm_medium=nativeads&utm_campaign=hackingwithswift-nativeads-july" style="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 100;"></a>
<picture>
<source srcset="/img/sponsors/instabug-dark.svg" media="(prefers-color-scheme: dark)" />
<img alt="Hacking with Swift is sponsored by Instabug" src="/img/sponsors/instabug-light.svg" />
</picture>
<p><strong class="badge badge-danger">SPONSORED</strong> <strong>Are you tired of wasting time debugging your Swift app?</strong> Instabug’s SDK is here to help you minimize debugging time by providing you with complete device details, network logs, and reproduction steps with every bug report. All data is attached automatically, and it only takes a line of code to setup. Start your free trial now and get 3 months off exclusively for the Hacking with Swift Community.</p>
<p class="text-right"><a href="https://try.instabug.com/hackingwithswift?utm_source=hackingwithswift&utm_medium=nativeads&utm_campaign=hackingwithswift-nativeads-july" class="btn btn-danger" style="border-radius: 10px; text-decoration: none; margin-bottom: 0; font-weight: bold;">Start your free trial!</a></p>
</a>
</div>
<p class="text-center" style="margin-top: -20px; margin-bottom: 40px; font-style: italic;"><a href="/sponsor">Sponsor Hacking with Swift and reach the world's largest Swift community!</a></p>
</div>
</div>
</div>
<div class="col-lg-3" style="padding: 0; padding-top: 20px;">
<div class="books-sidebar" style="text-align: center;">
<strong>BUY OUR BOOKS</strong>
</div>
<div class="books-sidebar">
<a href="/store/pro-swift"><img src="/img/covers-flat/pro-swift.png" srcset="/img/covers-flat/pro-swift@2x.png 2x" alt="Buy Pro Swift" width="95" /></a>
<a href="/store/swift-design-patterns"><img src="/img/covers-flat/patterns.png" srcset="/img/covers-flat/patterns@2x.png 2x" alt="Buy Swift Design Patterns" width="95" /></a>
<a href="/store/testing-swift"><img src="/img/covers-flat/testing.png" srcset="/img/covers-flat/testing@2x.png 2x" alt="Buy Testing Swift" width="95" /></a>
<a href="/store/hacking-with-ios"><img src="/img/covers-flat/hws.png" srcset="/img/covers-flat/hws@2x.png 2x" alt="Buy Hacking with iOS" width="95" /></a>
<a href="/store/swift-coding-challenges"><img src="/img/covers-flat/swiftcc.png" srcset="/img/covers-flat/swiftcc@2x.png 2x" alt="Buy Swift Coding Challenges" width="95" /></a>
<a href="/store/swift-on-sundays-1"><img src="/img/covers-flat/sundays-1.png" srcset="/img/covers-flat/sundays-1@2x.png 2x" alt="Buy Swift on Sundays Volume One" width="95" /></a>
<a href="/store/server-side-swift"><img src="/img/covers-flat/vapor.png" srcset="/img/covers-flat/vapor@2x.png 2x" alt="Buy Server-Side Swift (Vapor Edition)" width="95" /></a>
<a href="/store/advanced-ios-1"><img src="/img/covers-flat/advanced-ios-1.png" srcset="/img/covers-flat/advanced-ios-1@2x.png 2x" alt="Buy Advanced iOS Volume One" width="95" /></a>
<a href="/store/advanced-ios-2"><img src="/img/covers-flat/advanced-ios-2.png" srcset="/img/covers-flat/advanced-ios-2@2x.png 2x" alt="Buy Advanced iOS Volume Two" width="95" /></a>
<a href="/store/advanced-ios-3"><img src="/img/covers-flat/advanced-ios-3.png" srcset="/img/covers-flat/advanced-ios-3@2x.png 2x" alt="Buy Advanced iOS Volume Three" width="95" /></a>
<a href="/store/hacking-with-watchos"><img src="/img/covers-flat/watchos.png" srcset="/img/covers-flat/watchos@2x.png 2x" alt="Buy Hacking with watchOS" width="95" /></a>
<a href="/store/hacking-with-tvos"><img src="/img/covers-flat/tvos.png" srcset="/img/covers-flat/tvos@2x.png 2x" alt="Buy Hacking with tvOS" width="95" /></a>
<a href="/store/hacking-with-macos"><img src="/img/covers-flat/macos.png" srcset="/img/covers-flat/macos@2x.png 2x" alt="Buy Hacking with macOS" width="95" /></a>
<a href="/store/dive-into-spritekit"><img src="/img/covers-flat/spritekit.png" srcset="/img/covers-flat/spritekit@2x.png 2x" alt="Buy Dive Into SpriteKit" width="95" /></a>
<a href="/sixty"><img src="/img/covers-flat/sixty.png" srcset="/img/covers-flat/sixty@2x.png 2x" alt="Buy Swift in Sixty Seconds" width="95" /></a>
<a href="/store/objective-c-for-swift-developers"><img src="/img/covers-flat/objc.png" srcset="/img/covers-flat/objc@2x.png 2x" alt="Buy Objective-C for Swift Developers" width="95" /></a>
<a href="/store/server-side-swift"><img src="/img/covers-flat/kitura.png" srcset="/img/covers-flat/kitura@2x.png 2x" alt="Buy Server-Side Swift (Kitura Edition)" width="95" /></a>
<a href="/store/beyond-code"><img src="/img/covers-flat/beyond-code.png" srcset="/img/covers-flat/beyond-code@2x.png 2x" alt="Buy Beyond Code" width="95" /></a>
</div>
</div>
</div>
<div style="margin-bottom: 20px;">
<div class="row">
<div class="col-sm-1" style="text-align: left;"></div>
<div class="col-sm-2">
<p style="text-align: center;"><img src="/img/paul.png" srcset="/img/paul@2x.png 2x" class="img-responsive" style="border-radius: 64px; border: 1px solid black; margin: auto;" /></p>
<p style="text-align: center;"><a href="https://twitter.com/twostraws">@twostraws</a></p>
</div>
<div class="col-sm-8" style="text-align: left;"><h3 style="margin: 0">About the author</h3><p>Paul Hudson is the creator of Hacking with Swift, the <a href="/store">most comprehensive series of Swift books</a> in the world. He's also the editor of <a href="/articles">Swift Developer News</a>, the maintainer of the <a href="/example-code">Swift Knowledge Base</a>, and a speaker at <a href="/speaking">Swift events around the world</a>. If you're curious you can <a href="/about">learn more here</a>.</p></div>
<div class="col-sm-1" style="text-align: left;"></div>
</div> </div>
<div class="row" style="margin-top: 40px">
<div class="col-6 hws-news-others">
<p class="lead"><a href="/articles" class="hws-primary-text">More articles</a></p>
</div>
<div class="col-6 hws-news-others">
<p class="lead text-right"><img src="/img/feed.png" style="height: 22px; vertical-align: middle; margin-bottom: 4px;" /> <a class="hws-primary-text" href="/articles/rss">
RSS feed</a></p>
</div>
</div>
<div class="row">
<div class="card-deck" style="margin-bottom: 0px;">
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/222/wwdc20-wrap-up-and-recommended-talks">
<img class="img rounded" src="/uploads/wwdc-20.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/222/wwdc20-wrap-up-and-recommended-talks">WWDC20: Wrap up and recommended talks</a>
</h4>
</div>
</div>
</div>
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/221/whats-new-in-swiftui-for-ios-14">
<img class="img rounded" src="/uploads/swiftui.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/221/whats-new-in-swiftui-for-ios-14">What’s new in SwiftUI for iOS 14</a>
</h4>
</div>
</div>
</div>
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/220/introducing-hacking-with-swift-plus">
<img class="img rounded" src="/uploads/plus.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/220/introducing-hacking-with-swift-plus">Introducing Hacking with Swift+</a>
</h4>
</div>
</div>
</div>
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/219/new-book-understanding-swift">
<img class="img rounded" src="/uploads/understanding-swift.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/219/new-book-understanding-swift">New book: Understanding Swift</a>
</h4>
</div>
</div>
</div>
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/218/whats-new-in-swift-5-3">
<img class="img rounded" src="/uploads/swift-evolution-4.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/218/whats-new-in-swift-5-3">What’s new in Swift 5.3?</a>
</h4>
</div>
</div>
</div>
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/217/complete-guide-to-layout-in-swiftui">
<img class="img rounded" src="/uploads/swiftui.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/217/complete-guide-to-layout-in-swiftui">The Complete Guide to Layout in SwiftUI</a>
</h4>
</div>
</div>
</div>
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/216/complete-guide-to-navigationview-in-swiftui">
<img class="img rounded" src="/uploads/swiftui.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/216/complete-guide-to-navigationview-in-swiftui">The Complete Guide to NavigationView in SwiftUI</a>
</h4>
</div>
</div>
</div>
<div class="col-sm-6 col-lg-3 mb-4 card-deck mx-auto">
<div class="card card-blog">
<div class="card-image">
<a href="/articles/215/spot-the-swifty">
<img class="img rounded" src="/uploads/spot-the-swifty.jpg" loading="lazy">
</a>
</div>
<div class="card-body" style="padding: 1rem">
<h4 class="card-title" style="margin: 0">
<a href="/articles/215/spot-the-swifty">Spot the Swifty</a>
</h4>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<section class="page-rating-container" style="margin-top: 40px" data-background-color="gray">
<div class="container">
<div class="row text-center" style="display: block;">
<div id="page-rating-start">
<p class="m-0">Was this page useful? Let us know!</p>
<select id="page-rating">
<option value=""></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
</select>
</div>
<p class="m-0"><small>Average rating: 4.5/5</small></p>
<div id="page-rating-end" style="display: none">
<p>Thank you!</p>
</div>
</div>
</div>
</section>
<script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "Article",
      "author": "Paul Hudson",
      "datePublished": "2018-05-24",
      "dateModified": "2019-03-29",
      "headline": "The Ultimate Guide to WKWebView",
      "image": {
        "@type": "imageObject",
        "url": "https://www.hackingwithswift.com/uploads/iphone-6.jpg"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.5",
            "worstRating": "1.0",
            "bestRating": "5.0",
            "reviewCount": "58"
        },
      "publisher": {
        "@type": "Organization",
        "name": "Hacking with Swift",
        "logo": {
          "@type": "imageObject",
            "url": "https://www.hackingwithswift.com/files/logo-large.png"
          }
        }
      }
    </script>
<div class="buy-footer">
<a href="/store" class="btn btn-block btn-full-width" style="white-space: normal;">Click here to visit the Hacking with Swift store &gt;&gt;</a>
</div>
<footer class="footer" style="background-color: #444444; background: linear-gradient(to bottom, #505050 0%,#333333 100%);">
<div class="container text-center">
<div class="row">
<div class="col-md-4 contact-details">
<a href="https://twitter.com/twostraws" rel="noopener">
<h4><i class="fab fa-twitter fa-3x"></i></h4>
<p>@twostraws</p>
</a>
</div>
<div class="col-md-4 contact-details">
<a href="mailto:paul@hackingwithswift.com">
<h4><i class="fal fa-envelope fa-3x"></i></h4>
<p>paul@hackingwithswift.com</p>
</a>
</div>
<div class="col-md-4 contact-details">
<a href="/sponsor">
<h4><i class="fal fa-megaphone fa-3x"></i></h4>
<p>Sponsor the site</p>
</a>
</div>
</div>
<div class="row copyright">
<div class="col-lg-12">
<p>Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, AirDrop, iBeacon, iPhone, iPad, Safari, App Store, watchOS, tvOS, Mac and macOS are trademarks of Apple Inc., registered in the U.S. and other countries. Pulp Fiction is copyright &copy; 1994 Miramax Films. Hacking with Swift is &copy;2020 Hudson Heavy Industries.</p>
<p style="margin-top: 50px">
<a href="/about">About</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
<a href="/glossary">Glossary</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
<a href="/privacy">Privacy Policy</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
<a href="/refund-policy">Refund Policy</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
<a href="/update-policy">Update Policy</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
<a href="/conduct">Code of Conduct</a>
</p>
<p style="margin-top: 70px" class="lead">
<a href="/supporters">Hacking with Swift is sponsored by Gold Supporters on Patreon – click here to find out more</a>
</p>
<p class="lead"><em>Thanks for your support, Jack Hodgson!</em></p>
</div>
</div>
</div>
</footer>
</div>
<div aria-atomic="true" id="hws-pasteboard-toast" class="toast" data-autohide="true" data-delay="1000" style="position: fixed; bottom: 20px; right: 20px;">
<div class="toast-body">
<p style="color: black; margin: 0">Link copied to your pasteboard.</p>
</div>
</div>
<script src="/js/site-2.js" type="text/javascript"></script>
<script type="text/javascript">
		$(function() {
			$('#page-rating').barrating('show', {
				theme: 'css-stars',
				onSelect: function(value, text, event) {
					if (typeof(event) !== 'undefined') {
						// rating was selected by a user
						var rating = $(event.target).data("rating-value");
						$.ajax({
							type: "POST",
							url: "/rating",
							data: { "url": window.location.pathname, "rating": rating },
						});
						$("#page-rating-start").hide();
						$("#page-rating-end").show();
					} else {
						// rating was selected programmatically
						// by calling `set` method
					}
				}
			});

					});
	</script>

</body>
</html>
